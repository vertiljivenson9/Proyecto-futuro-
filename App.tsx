import React, { useState, useEffect, useCallback, useRef } from 'react';import Desktop from './components/Desktop';import Login from './components/Login';import { initFS } from './services/fs';import { initRegistry } from './services/registry';import { initAssets } from './services/assets';import { Kernel } from './services/kernel';export default function App() {const [bootState, setBootState] = useState('bios');const [windows, setWindows] = useState([]);const [registry, setRegistry] = useState(null);useEffect(() => {initFS().then(() => initRegistry()).then(r => {setRegistry(r);return initAssets();}).then(() => Kernel.checkSecurityStatus()).then(s => setBootState(s ? 'login' : 'desktop'));}, []);if (bootState === 'bios') return <div className="h-full bg-black flex items-center justify-center font-mono text-indigo-400">BOOTING_CORE...</div>;if (bootState === 'login') return <Login onUnlock={async p => await Kernel.verifyPin(p)} onFileUnlock={async c => await Kernel.verifyKeyFile(c)} />;return <Desktop registry={registry} windows={windows} setWindows={setWindows} onOpenWindow={(id, title, icon) => {}} onPower={() => {}} isAdmin={true} onValidateAdmin={() => true} />;}